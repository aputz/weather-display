(function(t){function e(e){for(var n,r,o=e[0],c=e[1],u=e[2],f=0,d=[];f<o.length;f++)r=o[f],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0f11":function(t,e,a){},"1a1c":function(t,e,a){t.exports=a.p+"img/pointer.e9aee5a3.png"},2140:function(t,e,a){},"36c8":function(t,e,a){"use strict";var n=a("515d"),s=a.n(n);s.a},4111:function(t,e,a){"use strict";var n=a("2140"),s=a.n(n);s.a},"445b":function(t,e,a){"use strict";var n=a("68cb"),s=a.n(n);s.a},"515d":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("8c4f"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home__container"},[a("div",{staticClass:"home__nested-container"},[a("transition",{attrs:{name:"slide",mode:"out-in"},on:{beforeLeave:t.beforeLeave,enter:t.enter,afterEnter:t.afterEnter}},[a("router-view")],1)],1)])},r=[],o={name:"Home",data:function(){return{prevHeight:0}},methods:{beforeLeave:function(t){this.prevHeight=getComputedStyle(t).height},enter:function(t){var e=getComputedStyle(t),a=e.height;t.style.height=this.prevHeight,setTimeout((function(){t.style.height=a}))},afterEnter:function(t){t.style.height="auto"}}},c=o,u=(a("c4e0"),a("2877")),l=Object(u["a"])(c,i,r,!1,null,"4fbb70ba",null),f=l.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"search-form__container",attrs:{name:"search-form"},on:{submit:function(e){return e.preventDefault(),t.handleSubmision()}}},[a("h2",{staticClass:"title is-2"},[t._v("Enter a city name")]),a("p",{staticClass:"subtitle is-4"},[t._v("to look up weather in following days")]),a("b-field",{attrs:{label:"City name",type:t.isValid?"":"is-danger",message:t.isValid?"":"You need to enter an existing city"}},[a("b-autocomplete",{attrs:{data:t.suggestions,"custom-formatter":function(t){return t.name+", "+t.country},loading:t.isLoading,placeholder:"City name",icon:"magnify"},on:{input:function(e){return t.getSuggestions()},select:function(e){return t.handleSelection(e)},focus:function(e){t.isValid=!0}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t.showDropdown?a("template",{slot:"empty"},[t._v("No results found")]):t._e()],2)],1),a("b-button",{attrs:{type:"is-primary search-form__submit","native-type":"submit",loading:t.isLoading}},[t._v("Look up the weather")])],1)},p=[],m=(a("b0c0"),a("d3b7"),a("ac1f"),a("5319"),a("498a"),{GET_FORECAST:"getForecast",GET_SUGGESTIONS:"setSuggestions",SET_LOADING:"setLoading"}),h={SET_FORECAST:"setForecast",SET_CITY_DATA:"setCityData",SET_SUGGESTIONS:"setSuggestions",SET_LOADING:"setLoading"},g={FORECAST:"forecast",CITY_DATA:"cityData",SUGGESTIONS:"suggestions",ISLOADING:"isLoading"},_={created:function(){var t=this,e=this.getFromStorage();if(e){var a=e.cityId,n=e.cityName;this.$store.dispatch(m.GET_FORECAST,a).then((function(){t.$router.push({name:"Results",params:{cityName:n.replace(" ","").toLowerCase()}})}))}},methods:{getFromStorage:function(){return localStorage&&localStorage.getItem("cityId")&&localStorage.getItem("cityName")?{cityId:localStorage.getItem("cityId"),cityName:localStorage.getItem("cityName")}:null}}},S={name:"SearchForm",mixins:[_],data:function(){return{city:{},selected:"",isSelected:!1,isLoading:!1,isValid:!0}},computed:{suggestions:function(){return this.$store.getters[g.SUGGESTIONS]},showDropdown:function(){return!!this.selected&&this.selected.length>=3}},methods:{handleSubmision:function(){var t=this;if(this.isValid&&this.city){var e=this.city,a=e.id,n=e.name;this.isLoading=!0,this.$store.dispatch(m.GET_FORECAST,a).then((function(){t.setInStorage(a,n),t.$router.push({name:"Results",params:{cityName:n.replace(" ","").toLowerCase()}})})).finally((function(){t.isLoading=!1}))}},getSuggestions:function(){var t=this,e=this.selected.trim().replace(/[^A-Za-z]/g,""),a=e.length>=3&&!this.isSelected&&this.isValid&&!this.isLoading;a&&(this.isLoading=!0,this.$store.dispatch(m.GET_SUGGESTIONS,e).then((function(){t.isSelected||t.checkValidity()})).finally((function(){t.isLoading=!1})))},checkValidity:function(){this.isValid=!(0===this.suggestions.length||this.selected.length<0||this.isSelected)},handleSelection:function(t){this.city=t,this.isSelected=!!t,this.isSelected&&(this.isValid=!0)},setInStorage:function(t,e){localStorage&&(localStorage.setItem("cityId",t),localStorage.setItem("cityName",e))}}},b=S,v=(a("f1de"),Object(u["a"])(b,d,p,!1,null,"3160b09a",null)),y=v.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"results__container"},[t.cityData?n("div",{staticClass:"results__city-data"},[n("h2",{staticClass:"title is-2"},[t._v(t._s(t.cityData.name))]),n("span",{staticClass:"tag is-primary"},[t._v(t._s(t.cityData.country))]),n("span",{staticClass:"tag is-light"},[t._v(t._s(t.timezone))]),n("div",{staticClass:"image-container"},[n("img",{staticClass:"map",attrs:{src:t.cityData.imageSrc,alt:"City location"}}),n("img",{staticClass:"pointer",attrs:{src:a("1a1c"),alt:""}})])]):t._e(),n("b-tabs",{staticClass:"tabs-container"},t._l(t.forecastData,(function(e,a){return n("b-tab-item",{key:a,attrs:{label:t.getFormattedDate(a)}},[n("ForecastTab",{attrs:{forecast:e.forecast}})],1)})),1)],1)},O=[],C=(a("99af"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.forecast?a("ul",{staticClass:"forecast-tab"},t._l(t.forecast,(function(e,n){return a("li",{key:n,staticClass:"forecast-tab__item"},[a("span",{staticClass:"hour"},[t._v(t._s(t.hourFormat(e.dt_txt)))]),a("img",{staticClass:"description-icon",attrs:{src:t.createIconUrl(e.weather[0].icon),alt:""}}),a("span",{staticClass:"description"},[t._v(t._s(e.weather[0].description))]),a("div",{staticClass:"info"},[a("span",{staticClass:"temp-header"},[t._v("Temperature")]),a("span",{staticClass:"temp-value"},[t._v(t._s(parseInt(e.main.temp))+" Â°C")]),a("span",{staticClass:"hum-header"},[t._v("Humidity")]),a("span",{staticClass:"hum-value"},[t._v(t._s(e.main.humidity)+" %")]),a("span",{staticClass:"clouds-header"},[t._v("Clouds")]),a("span",{staticClass:"clouds-value"},[t._v(t._s(e.clouds.all)+" %")]),a("span",{staticClass:"wind-header"},[t._v("Wind")]),a("span",{staticClass:"wind-value"},[a("b-icon",{style:"transform: rotate("+e.wind.deg+"deg)",attrs:{icon:"arrow-up",size:"is-small"}}),t._v(" "+t._s(e.wind.speed)+" m/s ")],1)])])})),0):t._e()}),E=[],I={name:"ForecastTab",props:{forecast:{type:Array,default:function(){return[]}}},methods:{hourFormat:function(t){return Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric"}).format(new Date(t))},createIconUrl:function(t){return"http://openweathermap.org/img/wn/".concat(t,"@2x.png")}}},N=I,w=(a("ff3b"),Object(u["a"])(N,C,E,!1,null,"cab1b7ae",null)),G=w.exports,D={name:"Results",components:{ForecastTab:G},computed:{forecastData:function(){return this.$store.getters[g.FORECAST]},cityData:function(){return this.$store.getters[g.CITY_DATA]},timezone:function(){var t=this.cityData.timezone/3600;return"".concat(t>0?"+":"").concat(t," UTC")}},methods:{getFormattedDate:function(t){return Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(t))}},created:function(){this.cityData||this.$router.push({name:"Search Form"})}},L=D,A=(a("c0fd"),Object(u["a"])(L,T,O,!1,null,"04abbdc6",null)),j=A.exports;n["a"].use(s["a"]);var F,$,x,U=[{path:"/",component:f,meta:{title:"Weather display"},children:[{path:"/",redirect:"/search"},{path:"/search",name:"Search Form",component:y},{path:"/result/:cityName",name:"Results",component:j}]}],R=new s["a"]({mode:"history",routes:U}),P=R,k=a("ade3"),V=a("2f62"),Y=a("bc3a"),M=a.n(Y),z=a("aced"),H=function(t,e){var a=Object.prototype.hasOwnProperty.call(t,"message")?t.message:t;e(a)},W=function(t){z["a"].open({message:t,type:"is-danger"})};M.a.interceptors.response.use((function(t){return t}),(function(t){return H(t,W)})),n["a"].use(V["a"]);var J=new V["a"].Store({state:{city:null,forecast:null,suggestions:[],isLoading:!0},mutations:(F={},Object(k["a"])(F,h.SET_FORECAST,(function(t,e){t.forecast=e})),Object(k["a"])(F,h.SET_CITY_DATA,(function(t,e){t.city=e})),Object(k["a"])(F,h.SET_SUGGESTIONS,(function(t,e){t.suggestions=e})),Object(k["a"])(F,h.SET_LOADING,(function(t,e){setTimeout((function(){t.isLoading=e}),e?0:1e3)})),F),getters:($={},Object(k["a"])($,g.FORECAST,(function(t){return t.forecast})),Object(k["a"])($,g.CITY_DATA,(function(t){return t.city})),Object(k["a"])($,g.SUGGESTIONS,(function(t){return t.suggestions})),Object(k["a"])($,g.ISLOADING,(function(t){return t.isLoading})),$),actions:(x={},Object(k["a"])(x,m.GET_FORECAST,(function(t,e){var a=t.commit,n="/api/forecast/".concat(e);return a(h.SET_LOADING,!0),M.a.get(n).then((function(t){return t.data.result})).then((function(t){var e=t.city,n=t.list;a(h.SET_CITY_DATA,e),a(h.SET_FORECAST,n)})).finally((function(){a(h.SET_LOADING,!1)}))})),Object(k["a"])(x,m.GET_SUGGESTIONS,(function(t,e){var a=t.commit,n="/api/search/".concat(e);return a(h.SET_SUGGESTIONS,[]),M.a.get(n).then((function(t){return t.data.result})).then((function(t){a(h.SET_SUGGESTIONS,t)}))})),Object(k["a"])(x,m.SET_LOADING,(function(t,e){var a=t.commit;a(h.SET_LOADING,e)})),x)}),Z=a("184c"),q=a("10bd"),B=a("283c"),K=a("dcd5"),Q=a("77b4"),X=a("c0ac"),tt=a("fe55"),et=(a("5abe"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app__container",attrs:{id:"app"}},[a("Preloader"),a("Navbar",{attrs:{appName:t.appName}}),a("router-view")],1)}),at=[],nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"navbar__container",attrs:{type:"is-transparent"}},[a("template",{slot:"brand"},[a("b-navbar-item",{staticClass:"navbar__brand",attrs:{tag:"div"},on:{click:function(e){return t.returnToMainPage()}}},[a("Logo",{attrs:{appName:t.appName}})],1)],1)],2)},st=[],it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"title is-6 has-text-white logo__container"},[t._v(t._s(t.appName))])},rt=[],ot={name:"Logo",props:{appName:{type:String,default:""}}},ct=ot,ut=(a("dbf3"),Object(u["a"])(ct,it,rt,!1,null,null,null)),lt=ut.exports,ft={name:"Navbar",components:{Logo:lt},props:{appName:{type:String,default:""}},methods:{returnToMainPage:function(){this.clearStorage(),this.$router.push({path:"/"})},clearStorage:function(){localStorage&&localStorage.clear()}}},dt=ft,pt=(a("36c8"),Object(u["a"])(dt,nt,st,!1,null,"59c15e89",null)),mt=pt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fadeInOut"}},[t.isLoading?a("div",{staticClass:"preloader__container"},[a("div",{staticClass:"preloader__element"})]):t._e()])},gt=[],_t={name:"Preloader",computed:{isLoading:function(){return this.$store.getters[g.ISLOADING]}}},St=_t,bt=(a("4111"),Object(u["a"])(St,ht,gt,!1,null,"2ddd26ea",null)),vt=bt.exports,yt={data:function(){return{appName:"Weather display"}},components:{Navbar:mt,Preloader:vt},watch:{$route:function(t,e){document.title=t.meta.title||"Weather display"}},created:function(){document.title="Weather display",this.$store.dispatch(m.SET_LOADING,!1)}},Tt=yt,Ot=(a("445b"),Object(u["a"])(Tt,et,at,!1,null,null,null)),Ct=Ot.exports;n["a"].config.productionTip=!1,n["a"].use(Z["a"]),n["a"].use(q["a"]),n["a"].use(B["a"]),n["a"].use(K["a"]),n["a"].use(Q["a"]),n["a"].use(X["a"]),n["a"].use(z["b"]),n["a"].use(tt["a"]),new n["a"]({router:P,store:J,render:function(t){return t(Ct)}}).$mount("#app")},"68cb":function(t,e,a){},"8dd3":function(t,e,a){},c0fd:function(t,e,a){"use strict";var n=a("8dd3"),s=a.n(n);s.a},c4e0:function(t,e,a){"use strict";var n=a("f6af"),s=a.n(n);s.a},d304:function(t,e,a){},dbf3:function(t,e,a){"use strict";var n=a("0f11"),s=a.n(n);s.a},f1de:function(t,e,a){"use strict";var n=a("fa55"),s=a.n(n);s.a},f6af:function(t,e,a){},fa55:function(t,e,a){},ff3b:function(t,e,a){"use strict";var n=a("d304"),s=a.n(n);s.a}});